<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dtKqhz">
      <PropertyDef name="gh"/>
      <PropertyDef name="id"/>
      <PropertyDef name="lx"/>
      <PropertyDef name="1"/>
      <PropertyDef name="2"/>
      <PropertyDef name="3"/>
      <PropertyDef name="4"/>
      <PropertyDef name="5"/>
      <PropertyDef name="6"/>
      <PropertyDef name="7"/>
      <PropertyDef name="8"/>
      <PropertyDef name="9"/>
      <PropertyDef name="10"/>
      <PropertyDef name="11"/>
      <PropertyDef name="12"/>
      <PropertyDef name="13"/>
      <PropertyDef name="14"/>
      <PropertyDef name="15"/>
      <PropertyDef name="16"/>
      <PropertyDef name="17"/>
      <PropertyDef name="18"/>
      <PropertyDef name="19"/>
      <PropertyDef name="20"/>
      <PropertyDef name="21"/>
      <PropertyDef name="22"/>
      <PropertyDef name="23"/>
      <PropertyDef name="24"/>
      <PropertyDef name="25"/>
      <PropertyDef name="26"/>
      <PropertyDef name="27"/>
      <PropertyDef name="28"/>
      <PropertyDef name="29"/>
      <PropertyDef name="30"/>
      <PropertyDef name="31"/>
      <PropertyDef name="hj">
        <Property name="label">合计</Property>
      </PropertyDef>
      <PropertyDef name="sj">
        <Property name="label">迟到合计（小时）</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtCondition">
      <PropertyDef name="sfzm">
        <Property name="label">是否忽略周末</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">是</Property>
              </Entity>
              <Entity>
                <Property name="key">0</Property>
                <Property name="value">否</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
        <Property name="defaultValue">1</Property>
      </PropertyDef>
      <PropertyDef name="id"/>
      <PropertyDef name="sj">
        <Property name="label">时间</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtKqsj">
      <PropertyDef name="id"/>
      <PropertyDef name="sj">
        <Property name="label">时间</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <ClientEvent name="onCreate">window.updateData = function(gh,lx,id,ts){&#xD;
	var words = sj.split(' - ');&#xD;
	view.get(&quot;#dsSj&quot;).setData({&#xD;
		gh:gh,lx:lx,id:id,ts:ts,sjq:words[0],sjz:words[1],jsjq:words[0],jsjz:words[1]&#xD;
	})&#xD;
	view.get(&quot;#dialogSj&quot;).show();&#xD;
}&#xD;
</ClientEvent>
    <DataSet id="dsKqhz">
      <Property name="dataProvider">kqglController#getKqhz</Property>
      <Property name="dataType">[dtKqhz]</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsCondition">
      <ClientEvent name="onReady">var now = new Date();&#xD;
var y = now.getFullYear();&#xD;
var m = now.getMonth();&#xD;
var sjq = now.setFullYear(y,m-1,1);&#xD;
var sjz = now.setFullYear(y,m,1);&#xD;
sjz= new Date((sjz/1000-86400)*1000)&#xD;
&#xD;
self.insert();&#xD;
</ClientEvent>
      <Property name="dataType">dtCondition</Property>
    </DataSet>
    <DataSet id="dsKqsj">
      <Property name="dataProvider">kqryController#getKqsj</Property>
    </DataSet>
    <DataSetDropDown id="dataSetDropDown1">
      <Property name="dataSet">dsKqsj</Property>
      <Property name="property">sj</Property>
      <Property name="assignmentMap">id=id;sj=sj</Property>
    </DataSetDropDown>
    <AjaxAction id="ajaxAction1">
      <Property name="service">kqglController#bulidKqhz</Property>
    </AjaxAction>
    <AutoForm>
      <Property name="dataSet">dsCondition</Property>
      <Property name="cols">*,*,*,*</Property>
      <Property name="labelWidth">100</Property>
      <AutoFormElement>
        <Property name="name">sj</Property>
        <Property name="property">sj</Property>
        <Property name="trigger">dataSetDropDown1</Property>
        <Property name="editable">false</Property>
        <Editor/>
      </AutoFormElement>
      <Button>
        <ClientEvent name="onClick">var dsCondition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
var sj = dsCondition.get(&quot;sj&quot;);&#xD;
if(sj==null||sj==&quot;&quot;){&#xD;
	dorado.MessageBox.alert(&quot;时间不能为空&quot;);&#xD;
}else{&#xD;
	view.get(&quot;#dsKqhz&quot;).set(&quot;parameter&quot;,dsCondition).flushAsync();&#xD;
}</ClientEvent>
        <Property name="caption">查询</Property>
      </Button>
      <Button>
        <Property name="caption">生成</Property>
      </Button>
      <Button>
        <ClientEvent name="onClick">var action = view.get(&quot;#export2ReportActionResult&quot;);&#xD;
&#xD;
action.doDowloadReport = function(data) {&#xD;
		var id = data.id;&#xD;
		var name = data.name;&#xD;
		if (id &amp;&amp; name) {&#xD;
			var url = $url(&quot;>dorado/bdf2/export/doDownloadFile?id=&quot; + id + &quot;&amp;name=&quot; + name);&#xD;
			window.open(url, &quot;_blank&quot;);&#xD;
		}&#xD;
};&#xD;
if(view.get(&quot;#dsKqhz.data:#&quot;)){&#xD;
	action.execute();&#xD;
}&#xD;
</ClientEvent>
        <Property name="caption">导出</Property>
      </Button>
    </AutoForm>
    <DataGrid id="dataGridResult">
      <Property name="dataSet">dsKqhz</Property>
      <Property name="readOnly">true</Property>
      <Property name="dynaRowHeight">true</Property>
      <DataColumn name="1">
        <Property name="property">1</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="2">
        <Property name="property">2</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="3">
        <Property name="property">3</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="4">
        <Property name="property">4</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="5">
        <Property name="property">5</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="6">
        <Property name="property">6</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="7">
        <Property name="property">7</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="8">
        <Property name="property">8</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="9">
        <Property name="property">9</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="10">
        <Property name="property">10</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="11">
        <Property name="property">11</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="12">
        <Property name="property">12</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="13">
        <Property name="property">13</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="14">
        <Property name="property">14</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="15">
        <Property name="property">15</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="16">
        <Property name="property">16</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="17">
        <Property name="property">17</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="18">
        <Property name="property">18</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="19">
        <Property name="property">19</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="20">
        <Property name="property">20</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="21">
        <Property name="property">21</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="22">
        <Property name="property">22</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="23">
        <Property name="property">23</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="24">
        <Property name="property">24</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="25">
        <Property name="property">25</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="26">
        <Property name="property">26</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="27">
        <Property name="property">27</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="28">
        <Property name="property">28</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="29">
        <Property name="property">29</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="30">
        <Property name="property">30</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
      <DataColumn name="31">
        <Property name="property">31</Property>
        <Property name="width">36</Property>
        <Property name="wrappable">true</Property>
      </DataColumn>
    </DataGrid>
    <Export2ReportAction id="export2ReportActionResult">
      <Property name="fileName">dcjg</Property>
      <Property name="template">dataGridResult</Property>
      <Property name="maxSize">10000</Property>
    </Export2ReportAction>
  </View>
</ViewConfig>
